<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Prototype Form</title>
</head>


<form id="formOne">
    <div id="firstDivision">
        text : <input type="text" id="textSport" value="농구"/><br/><br/>

        select: <br/>
        <select id="selectRiver" name="nameRiver" size="3">
            <option id="river0" value="A">한강</option>
            <option id="river1" value="B" selected>낙동강</option>
            <option id="river2" value="C">금강</option>
        </select>
        <br/><br/>
        textArea : <br/>
        <textarea id="textArea" name="textArea" rows="2" cols="20" wrap="soft">아름다운 우리 강산</textarea><br/><br/>
        text : <input type="text" id="textMountain" name="input" value="한라산"/><br/><br/>
        <input type="text" id="etc" name="etc" value="기타"/><br/><br/>

        <div id="buttonArea">
            <input type="button" id="okClick" value="입력완료" />
        </div>


        <div id="showArea">
            <div id="show1"></div>
        </div>
    </div>
</form>

<script src="../../libs/jquery.js"></script>
<script src="../../libs/prototype.js"></script>
<script>

    ///////////////////////////////////////////////////////////////////
    // 테스트
    ///////////////////////////////////////////////////////////////////

    var re = $R(1, 10);
    var add = function(acc, n, i) {
        console.log(acc, n, i);
        return acc + n;
    };
    var result = re.inject(0, add);
    console.log(result);


    ['a', 'b', 'c', 'd', 'e'].inject([], function(string, value, index) {
        console.log(string, value, index);
        if (index % 2 === 0) { // even numbers
            string += value;
        }
        return string;
    });


    var element = $('selectRiver');
    var method = element.tagName.toLowerCase();
    console.log(method);
    console.log(Form.Element.Serializers[method](element));
    console.log(Form.Element.Serializers.select(element));
    console.log('serialize:', Form.Element.serialize(element));

    var input = $('textMountain');
    console.log(Form.Element.serialize(input));
    console.log($F($('textArea')));


    console.log('getElements():', getElements('formOne'));

    function getElements(form) {
        return $A($(form).getElementsByTagName(('*'))).inject([], function(elements, child) {
            console.log('Form.Element.Serializers[', child.tagName.toLowerCase(), ']', Form.Element.Serializers[child.tagName.toLowerCase()]);

            if(Form.Element.Serializers[child.tagName.toLowerCase()]) {
                elements.push(Element.extend(child));

                console.log('child', child);
                console.log('Element.extend(child)', Element.extend(child));
            }

            return elements;
        });
    }

    ///////////////////////////////////////////////////////////////////
    // getElements 실행
    ///////////////////////////////////////////////////////////////////

    Event.observe(window, 'load', function() {
        Event.observe('okClick', 'click', Show.okClick);
    });


    var Show = {
        okClick: function(event) {
            var resultSelect = Form.getElements('formOne');

            var element;
            var showInput = '';

            for(var i = 0; i < resultSelect.length; i++) {

                element = resultSelect[i];

                console.log(element, element.tagName, typeof element.tagName, element.serialize());
                showInput += resultSelect[i].id + ', ';
            }

            $('show1').innerHTML = 'ID: ' + showInput;
        }
    }

</script>

</body>
</html>











